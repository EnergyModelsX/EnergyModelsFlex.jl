<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>CapacityCostLink · EnergyModelsFlex</title><meta name="title" content="CapacityCostLink · EnergyModelsFlex"/><meta property="og:title" content="CapacityCostLink · EnergyModelsFlex"/><meta property="twitter:title" content="CapacityCostLink · EnergyModelsFlex"/><meta name="description" content="Documentation for EnergyModelsFlex."/><meta property="og:description" content="Documentation for EnergyModelsFlex."/><meta property="twitter:description" content="Documentation for EnergyModelsFlex."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">EnergyModelsFlex</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../manual/quick-start/">Quick Start</a></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/flexible_demand/">Flexible demand</a></li><li><a class="tocitem" href="../../examples/capacity_cost_link/">Capacity cost link</a></li></ul></li><li><a class="tocitem" href="../../manual/NEWS/">Release notes</a></li></ul></li><li><span class="tocitem">Nodes</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Source nodes</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../nodes/source/payasproducedppa/">PayAsProducedPPA</a></li><li><a class="tocitem" href="../../nodes/source/inflexiblesource/">InflexibleSource</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Sink nodes</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../nodes/sink/perioddemand/">PeriodDemandSink</a></li><li><a class="tocitem" href="../../nodes/sink/loadshiftingnode/">LoadShiftingNode</a></li><li><a class="tocitem" href="../../nodes/sink/multipleinputsink/">MultipleInputSink</a></li><li><a class="tocitem" href="../../nodes/sink/multipleinputsinkstrat/">AbstractMultipleInputSinkStrat</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Network nodes</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../nodes/network/minupdowntimenode/">MinUpDownTimeNode</a></li><li><a class="tocitem" href="../../nodes/network/activationcostnode/">ActivationCostNode</a></li><li><a class="tocitem" href="../../nodes/network/limitedflexibleinput/">LimitedFlexibleInput</a></li><li><a class="tocitem" href="../../nodes/network/combustion/">Combustion</a></li><li><a class="tocitem" href="../../nodes/network/flexibleoutput/">FlexibleOutput</a></li></ul></li><li><a class="tocitem" href="../../nodes/storage/storageefficiency/">StorageEfficiency</a></li></ul></li><li><span class="tocitem">Links</span><ul><li class="is-active"><a class="tocitem" href>CapacityCostLink</a><ul class="internal"><li><a class="tocitem" href="#links-CapacityCostLink-fields"><span>Introduced type and its fields</span></a></li><li><a class="tocitem" href="#links-CapacityCostLink-math"><span>Mathematical description</span></a></li></ul></li></ul></li><li><span class="tocitem">How-to</span><ul><li><a class="tocitem" href="../../how-to/contribute/">Contribute</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../../library/public/">Public</a></li><li><input class="collapse-toggle" id="menuitem-6-2" type="checkbox"/><label class="tocitem" for="menuitem-6-2"><span class="docs-label">Internals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../library/internals/types/">Types</a></li><li><a class="tocitem" href="../../library/internals/methods-fields/">Methods - Accessing fields</a></li><li><a class="tocitem" href="../../library/internals/methods-EMF/">Methods - Internal</a></li><li><a class="tocitem" href="../../library/internals/methods-EMB/">Methods - <code>EMB</code></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Links</a></li><li class="is-active"><a href>CapacityCostLink</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>CapacityCostLink</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/EnergyModelsX/EnergyModelsFlex.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/EnergyModelsX/EnergyModelsFlex.jl/blob/main/docs/src/links/capacitycostlink.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="links-CapacityCostLink"><a class="docs-heading-anchor" href="#links-CapacityCostLink">CapacityCostLink</a><a id="links-CapacityCostLink-1"></a><a class="docs-heading-anchor-permalink" href="#links-CapacityCostLink" title="Permalink"></a></h1><p><a href="../../library/public/#EnergyModelsFlex.CapacityCostLink"><code>CapacityCostLink</code></a> links model the transport of energy between two nodes with capacity-dependent operational costs applied to a specified resource. Unlike standard <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/links/#EnergyModelsBase.Direct"><code>Direct</code></a> links, they enable cost modeling based on maximum capacity utilization over defined time periods. This is useful for applications such as transmission networks, pipelines, or interconnectors where usage fees scale with peak capacity demands.</p><p>In addition, they only allow the transport of a single, specified <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/resources/#EnergyModelsBase.Resource"><code>Resource</code></a>.</p><h2 id="links-CapacityCostLink-fields"><a class="docs-heading-anchor" href="#links-CapacityCostLink-fields">Introduced type and its fields</a><a id="links-CapacityCostLink-fields-1"></a><a class="docs-heading-anchor-permalink" href="#links-CapacityCostLink-fields" title="Permalink"></a></h2><p><a href="../../library/public/#EnergyModelsFlex.CapacityCostLink"><code>CapacityCostLink</code></a> is implemented as equivalent to an abstract type <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/links/#EnergyModelsBase.Link"><code>Link</code></a>. Hence, it utilizes the same functions declared in <code>EnergyModelsBase</code>.</p><div class="admonition is-warning" id="Application-of-the-link-e3a85ded6fb01f1e"><header class="admonition-header">Application of the link<a class="admonition-anchor" href="#Application-of-the-link-e3a85ded6fb01f1e" title="Permalink"></a></header><div class="admonition-body"><p>The current implementation is not very flexible with respect to the chosen time structure. Specifically, if you use <a href="https://sintefore.github.io/TimeStruct.jl/stable/reference/api/#TimeStruct.OperationalScenarios"><code>OperationalScenarios</code></a>, <a href="https://sintefore.github.io/TimeStruct.jl/stable/reference/api/#TimeStruct.RepresentativePeriods"><code>RepresentativePeriods</code></a>, or differing operational structures within your <a href="https://sintefore.github.io/TimeStruct.jl/stable/reference/api/#TimeStruct.TwoLevel"><code>TwoLevel</code></a>, you must be careful when choosing the parameter <code>cap_price_periods</code>.</p></div></div><h3 id="links-CapacityCostLink-fields-stand"><a class="docs-heading-anchor" href="#links-CapacityCostLink-fields-stand">Standard fields</a><a id="links-CapacityCostLink-fields-stand-1"></a><a class="docs-heading-anchor-permalink" href="#links-CapacityCostLink-fields-stand" title="Permalink"></a></h3><p><a href="../../library/public/#EnergyModelsFlex.CapacityCostLink"><code>CapacityCostLink</code></a> has the following standard fields, equivalent to a <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/links/#EnergyModelsBase.Direct"><code>Direct</code></a> link:</p><ul><li><strong><code>id</code></strong> :<br/>The field <code>id</code> is only used for providing a name to the link.</li><li><strong><code>from::Node</code></strong> :<br/>The node from which there is flow into the link.</li><li><strong><code>to::Node</code></strong> :<br/>The node to which there is flow out of the link.</li><li><strong><code>formulation::Formulation</code></strong> :<br/>The used formulation of links. If not specified, a <code>Linear</code> link is assumed.<div class="admonition is-info" id="Different-formulations-e605baf7d545d7f0"><header class="admonition-header">Different formulations<a class="admonition-anchor" href="#Different-formulations-e605baf7d545d7f0" title="Permalink"></a></header><div class="admonition-body"><p>The current implementation of links does not provide another formulation. Our aim is in a later stage to allow the user to switch fast through different formulations to increase or decrese the complexity of the model.</p></div></div></li></ul><h3 id="links-CapacityCostLink-fields-new"><a class="docs-heading-anchor" href="#links-CapacityCostLink-fields-new">Additional fields</a><a id="links-CapacityCostLink-fields-new-1"></a><a class="docs-heading-anchor-permalink" href="#links-CapacityCostLink-fields-new" title="Permalink"></a></h3><p>The following additional fields are included for <a href="../../library/public/#EnergyModelsFlex.CapacityCostLink"><code>CapacityCostLink</code></a> links:</p><ul><li><p><strong><code>cap::TimeProfile</code></strong> :<br/>The maximum transport capacity of the link for the <code>cap_resource</code>. If the link should contain investments through the application of <a href="https://energymodelsx.github.io/EnergyModelsInvestments.jl/"><code>EnergyModelsInvestments</code></a>, it is important to note that you can only use <code>FixedProfile</code> or <code>StrategicProfile</code> for the capacity, but not <code>RepresentativeProfile</code> or <code>OperationalProfile</code>. In addition, all values have to be non-negative.</p></li><li><p><strong><code>cap_price::TimeProfile</code></strong> :<br/>The price per unit of maximum capacity usage over the sub-periods. This value is averaged over sub-periods as defined by <code>cap_price_periods</code>. All values have to be non-negative.</p></li><li><p><strong><code>cap_price_periods::Int64</code></strong> :<br/>The number of sub-periods within a year for which the capacity cost is calculated. This allows modeling of varying peak demands across seasons. The value must be positive.</p><div class="admonition is-success" id="Number-of-sub-periods-1d4dde5299b772dd"><header class="admonition-header">Number of sub-periods<a class="admonition-anchor" href="#Number-of-sub-periods-1d4dde5299b772dd" title="Permalink"></a></header><div class="admonition-body"><p>For investment periods with many operational periods, consider increasing the number of <code>cap_price_periods</code>. The <a href="../../library/public/#EnergyModelsFlex.CapacityCostLink"><code>CapacityCostLink</code></a> capacity constraints couple operational periods and can significantly increase solve time. Splitting the horizon into multiple sub-periods reduces this coupling and often makes the problem much easier to solve. In some cases, this also means using more than one capacity price period even if capacity costs occur only annually in reality, depending on model size and complexity.</p></div></div></li><li><p><strong><code>cap_resource::Resource</code></strong> :<br/>The <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/resources/#EnergyModelsBase.Resource"><code>Resource</code></a> for which capacity-dependent costs are applied. This <code>Resource</code> is the only transported <code>Resource</code> by a <a href="../../library/public/#EnergyModelsFlex.CapacityCostLink"><code>CapacityCostLink</code></a>.</p></li><li><p><strong><code>data::Vector{&lt;:ExtensionData}</code></strong>:<br/>An entry for providing additional data to the model. In the current version, it is used for providing additional investment data when <a href="https://energymodelsx.github.io/EnergyModelsInvestments.jl/"><code>EnergyModelsInvestments</code></a> is used.</p><div class="admonition is-info" id="Constructor-for-CapacityCostLink-bfc06be4466406b6"><header class="admonition-header">Constructor for `CapacityCostLink`<a class="admonition-anchor" href="#Constructor-for-CapacityCostLink-bfc06be4466406b6" title="Permalink"></a></header><div class="admonition-body"><p>The field <code>data</code> is not required as we include constructors when the value is excluded.</p></div></div></li></ul><h2 id="links-CapacityCostLink-math"><a class="docs-heading-anchor" href="#links-CapacityCostLink-math">Mathematical description</a><a id="links-CapacityCostLink-math-1"></a><a class="docs-heading-anchor-permalink" href="#links-CapacityCostLink-math" title="Permalink"></a></h2><p>In the following mathematical equations, we use the name for variables and functions used in the model. Variables are in general represented as</p><p><span>$\texttt{var\_example}[index_1, index_2]$</span></p><p>with square brackets, while functions are represented as</p><p><span>$func\_example(index_1, index_2)$</span></p><p>with paranthesis.</p><h3 id="links-CapacityCostLink-math-var"><a class="docs-heading-anchor" href="#links-CapacityCostLink-math-var">Variables</a><a id="links-CapacityCostLink-math-var-1"></a><a class="docs-heading-anchor-permalink" href="#links-CapacityCostLink-math-var" title="Permalink"></a></h3><h4 id="links-CapacityCostLink-math-var-stand"><a class="docs-heading-anchor" href="#links-CapacityCostLink-math-var-stand">Standard variables</a><a id="links-CapacityCostLink-math-var-stand-1"></a><a class="docs-heading-anchor-permalink" href="#links-CapacityCostLink-math-var-stand" title="Permalink"></a></h4><p><a href="../../library/public/#EnergyModelsFlex.CapacityCostLink"><code>CapacityCostLink</code></a> utilizes standard variables from the <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/links/#EnergyModelsBase.Link"><code>Link</code></a> type, as described on the page <em><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var">Optimization variables</a></em>:</p><ul><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-flow"><span>$\texttt{link\_in}$</span></a></li><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-flow"><span>$\texttt{link\_out}$</span></a></li><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-cap"><span>$\texttt{link\_cap\_inst}$</span></a></li></ul><h4 id="links-CapacityCostLink-math-var-add"><a class="docs-heading-anchor" href="#links-CapacityCostLink-math-var-add">Additional variables</a><a id="links-CapacityCostLink-math-var-add-1"></a><a class="docs-heading-anchor-permalink" href="#links-CapacityCostLink-math-var-add" title="Permalink"></a></h4><p>Two additional variables track capacity utilization and associated costs over sub-periods:</p><ul><li><span>$\texttt{ccl\_max\_cap\_use}[l, t_{sub}]$</span>: Maximum capacity usage in sub-period <span>$t_{sub}$</span> for link <span>$l$</span>.</li><li><span>$\texttt{ccl\_cap\_cost}[l, t_{sub}]$</span>: Operational cost in sub-period <span>$t_{sub}$</span> for link <span>$l$</span>.</li></ul><h3 id="links-CapacityCostLink-math-con"><a class="docs-heading-anchor" href="#links-CapacityCostLink-math-con">Constraints</a><a id="links-CapacityCostLink-math-con-1"></a><a class="docs-heading-anchor-permalink" href="#links-CapacityCostLink-math-con" title="Permalink"></a></h3><h4 id="links-CapacityCostLink-math-con-stand"><a class="docs-heading-anchor" href="#links-CapacityCostLink-math-con-stand">Standard constraints</a><a id="links-CapacityCostLink-math-con-stand-1"></a><a class="docs-heading-anchor-permalink" href="#links-CapacityCostLink-math-con-stand" title="Permalink"></a></h4><p>The applied standard constraint for capacity installed is:</p><p class="math-container">\[\texttt{link\_cap\_inst}[l, t] = capacity(l, t)\]</p><p>and the no-loss constraint</p><p class="math-container">\[\texttt{link\_out}[l, t, p] = \texttt{link\_in}[l, t, p] \quad \forall p \in inputs(l)\]</p><h4 id="links-CapacityCostLink-math-con-add"><a class="docs-heading-anchor" href="#links-CapacityCostLink-math-con-add">Additional constraints</a><a id="links-CapacityCostLink-math-con-add-1"></a><a class="docs-heading-anchor-permalink" href="#links-CapacityCostLink-math-con-add" title="Permalink"></a></h4><p>All additional constraints are created within a new method for the function <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/internals/functions/#EnergyModelsBase.create_link"><code>create_link</code></a>.</p><p>The capacity utilization constraint tracks the maximum usage within each sub-period:</p><p class="math-container">\[\texttt{link\_in}[l, t, cap\_resource(l)] \leq \texttt{ccl\_max\_cap\_use}[l, t_{sub}]\]</p><p>The capacity cost is calculated as:</p><p class="math-container">\[\texttt{ccl\_cap\_cost}[l, t_{sub}] = \texttt{ccl\_max\_cap\_use}[l, t_{sub}] \times \overline{cap\_price}(l, t_{sub})\]</p><p>where <span>$\overline{cap\_price}$</span> is the average capacity price over the sub-period.</p><p>Finally, costs are aggregated to each strategic period:</p><p class="math-container">\[\texttt{link\_opex\_var}[l, t_{inv}] = \sum_{t_{sub} \in t_{inv}} \texttt{ccl\_cap\_cost}[l, t_{sub}]\]</p><p>In addition, the energy flow of the constrained resource should not exceed the maximum pipe capacity, which is included through the following constraint:</p><p class="math-container">\[\texttt{flow\_in}[l, t, cap\_resource(l)] \leq \texttt{link\_cap\_inst}[l, t]\]</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../nodes/storage/storageefficiency/">« StorageEfficiency</a><a class="docs-footer-nextpage" href="../../how-to/contribute/">Contribute »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Monday 12 January 2026 14:36">Monday 12 January 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
